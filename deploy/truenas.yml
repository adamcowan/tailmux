# Tailmux deployment for TrueNAS SCALE
# ------------------------------------
# This Docker Compose snippet is designed for the "Install via YAML" flow.
# It reuses the host's existing Tailscale connection by running in host
# networking mode. After the app starts, publish it inside your tailnet with:
#   tailscale serve tcp 3000 --name tailmux

services:
  app:
    deploy:
      resources:
        limits:
          cpus: '4'
          memory: 8192M
    environment:
      PORT: '3000'
      TZ: America/Los_Angeles
    image: ghcr.io/adamcowan/tailmux:latest
    network_mode: host
    platform: linux/amd64
    privileged: False
    restart: unless-stopped
    stdin_open: False
    tty: False
    volumes:
      - source: /mnt/POOL/apps/tailmux  # <-- change to your dataset path
        target: /app/data
        type: bind
